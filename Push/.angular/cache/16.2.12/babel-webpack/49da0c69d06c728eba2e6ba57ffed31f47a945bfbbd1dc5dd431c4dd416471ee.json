{"ast":null,"code":"import _asyncToGenerator from \"/Users/shrivallabhdeshmukh/Desktop/PMF/Cordova-Framework-Dev/Cordova-Sample-Final/SeperateSamples/Push/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ionic/angular\";\nlet GetbalancePage = /*#__PURE__*/(() => {\n  class GetbalancePage {\n    constructor(router, app_ref, loader) {\n      this.router = router;\n      this.app_ref = app_ref;\n      this.loader = loader;\n      this.balance = \"\";\n    }\n    ngOnInit() {\n      this.pinCodeChallenge();\n    }\n    getBalance() {\n      //this.show_balance_loading();\n      var resourceRequest = new WLResourceRequest(\"/adapters/ResourceAdapter/balance\", WLResourceRequest.GET);\n      resourceRequest.send().then(response => {\n        console.log(response.responseText);\n        this.balance = \"&#36; \" + response.responseText;\n        this.app_ref.tick();\n        // this.hide_loader();\n      }, response => {\n        alert(\"Failed to get balance: \" + JSON.stringify(response));\n        // this.hide_loader();\n      });\n    }\n\n    logout() {\n      var securityCheckName = 'UserLogin';\n      WLAuthorizationManager.logout(securityCheckName).then(() => {\n        alert(\" Successfully Logged out\");\n        this.router.navigate(['/']);\n      }, response => {\n        alert(\"logout onFailure: \" + JSON.stringify(response));\n      });\n    }\n    show_balance_loading() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const loading = yield _this.loader.create({\n          message: 'Fetching balance...'\n        });\n        loading.present();\n      })();\n    }\n    hide_loader() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        return yield _this2.loader.dismiss().then(() => console.log('dismissed'));\n      })();\n    }\n    pinCodeChallenge() {\n      var PinCodeChallengeHandler = WL.Client.createSecurityCheckChallengeHandler(\"PinCodeAttempts\");\n      console.log(' this.PinCodeChallengeHandler', this.PinCodeChallengeHandler);\n      PinCodeChallengeHandler.handleChallenge = function (challenge) {\n        var msg = \"\";\n        // Create the title string for the prompt\n        if (challenge.errorMsg !== null) {\n          msg = challenge.errorMsg + \"\\n\";\n        } else {\n          msg = \"This data requires a PIN code.\\n\";\n        }\n        msg += \"Remaining attempts: \" + challenge.remainingAttempts;\n        // Display a prompt for user to enter the pin code\n        var pinCode = prompt(msg, \"\");\n        if (pinCode) {\n          // calling submitChallengeAnswer with the entered value\n          PinCodeChallengeHandler.submitChallengeAnswer({\n            \"pin\": pinCode\n          });\n        } else {\n          // calling cancel in case user pressed the cancel button\n          PinCodeChallengeHandler.cancel();\n        }\n      };\n      // handleFailure\n      PinCodeChallengeHandler.handleFailure = function (error) {\n        WL.Logger.debug(\"Challenge Handler Failure!\");\n        if (error.failure !== null && error.failure !== undefined) {\n          alert(error.failure);\n        } else {\n          alert(\"Unknown error\");\n        }\n      };\n    }\n    static #_ = this.ɵfac = function GetbalancePage_Factory(t) {\n      return new (t || GetbalancePage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i0.ApplicationRef), i0.ɵɵdirectiveInject(i2.LoadingController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: GetbalancePage,\n      selectors: [[\"app-getbalance\"]],\n      decls: 24,\n      vars: 3,\n      consts: [[3, \"translucent\"], [\"slot\", \"secondary\"], [\"slot\", \"primary\"], [3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"log-out-outline\"], [1, \"ion-text-center\"], [3, \"fullscreen\"], [\"mode\", \"ios\", 2, \"background\", \"linear-gradient(90deg, rgba(24,21,64,1) 0%, rgba(253,148,90,1) 35%, rgba(193,122,83,1) 100%)\", \"margin\", \"2rem\"], [2, \"color\", \"white\"], [2, \"text-align\", \"center\"], [2, \"margin-bottom\", \"1rem\"], [2, \"font-weight\", \"bold\", \"color\", \"white\"], [\"fill\", \"outline\", \"color\", \"light\", \"size\", \"small\", 2, \"margin-bottom\", \"1rem\", 3, \"click\"], [2, \"color\", \"white\", \"font-weight\", \"bold\", 3, \"innerHTML\"]],\n      template: function GetbalancePage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\");\n          i0.ɵɵelement(2, \"ion-buttons\", 1);\n          i0.ɵɵelementStart(3, \"ion-buttons\", 2)(4, \"ion-button\", 3);\n          i0.ɵɵlistener(\"click\", function GetbalancePage_Template_ion_button_click_4_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelement(5, \"ion-icon\", 4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"ion-title\", 5);\n          i0.ɵɵtext(7, \"ABC Bank\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(8, \"ion-content\", 6)(9, \"ion-card\", 7)(10, \"ion-card-header\")(11, \"ion-card-subtitle\", 8);\n          i0.ɵɵtext(12, \"Welcome , Michael Perry\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"ion-card-content\", 9)(14, \"label\", 8);\n          i0.ɵɵtext(15, \"Savings A/C\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(16, \"br\");\n          i0.ɵɵelementStart(17, \"div\", 10)(18, \"label\", 11);\n          i0.ɵɵtext(19, \"124923741234\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"ion-button\", 12);\n          i0.ɵɵlistener(\"click\", function GetbalancePage_Template_ion_button_click_20_listener() {\n            return ctx.getBalance();\n          });\n          i0.ɵɵtext(21, \"View Balance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"br\")(23, \"label\", 13);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"translucent\", true);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"fullscreen\", true);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"innerHTML\", ctx.balance, i0.ɵɵsanitizeHtml);\n        }\n      },\n      dependencies: [i2.IonButton, i2.IonButtons, i2.IonCard, i2.IonCardContent, i2.IonCardHeader, i2.IonCardSubtitle, i2.IonContent, i2.IonHeader, i2.IonIcon, i2.IonTitle, i2.IonToolbar],\n      styles: [\"ion-toolbar[_ngcontent-%COMP%]{--background: #F55C07;--color: white}\"]\n    });\n  }\n  return GetbalancePage;\n})();\nexport { GetbalancePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}